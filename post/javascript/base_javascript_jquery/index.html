<!DOCTYPE html>
<html class="no-js" lang="ja" prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb#">
<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="description" content="">
  <meta name="keywords" itemprop="keywords" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="format-detection" content="telephone=no">
  <meta name="generator" content="Hugo 0.14" />
  
  
  <title> JavaScript / jQuery 自分の使い方 | My Blog </title>
  <link rel="stylesheet" href="http://localhost:1313/css/style.min.css">
  <link rel="apple-touch-icon-precomposed" href="http://localhost:1313/apple-touch-icon-precomposed.png">
  <link rel="shortcut icon" href="http://localhost:1313/favicon.ico">
  <link rel="canonical" href="http://localhost:1313/post/javascript/base_javascript_jquery/">

  <script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"></script>
  <script>window.Modernizr || document.write('<script src="http:\/\/localhost:1313\/bower_components/modernizr/modernizr.js"><\/script>')</script>
</head>

  <body class="single post base_javascript_jquery">
    <a class="visuallyhidden focusable" href="#main">メインコンテンツを読む</a>
    <!--[if lt IE 8]>
    <p class="browserupgrade">あなたは旧いWebブラウザを使用されています。
    安全性を確保し、表示の適正化するために<a href="http://browserupgrade.com/">ブラウザをアップデート</a>してください。</p>
    <![endif]-->

    <header class="global-header" role="banner">
      <p class="global-header__logo"><a href="http://localhost:1313/">My Blog</a></p>
      <p class="global-header__tagline">Web系技術ブログ</p>

      <nav id="main-menu">
      <ul>
        
        <li>
           <a href="http://localhost:1313/about/">About</a>
          
        </li>
        
        <li>
           <a href="http://localhost:1313/post/">Blog</a>
          
        </li>
        
        <li>
           <a href="http://localhost:1313/work/">Work</a>
          
        </li>
        
      </ul>


    	</nav>

    <ul class="social-links">
      <li><a href="taky1973@gmail.com"><i class="fa fa-envelope"></i></a></li>
      <li><a href="https://twitter.com/taku_nagai"><i class="fa fa-twitter"></i></a></li>
      <li><a href="https://www.facebook.com/takuya.nagai.12"><i class="fa fa-facebook"></i></a></li>
      <li><a href="https://github.com/takunagai"><i class="fa fa-github-alt"></i></a></li>
      <li><a href="http://takunagai.github.io.tumblr.com"><i class="fa fa-tumblr"></i></a></li>
      <li><a href="https://instagram.com/taku_n_/"><i class="fa fa-instagram"></i></a></li>
      <li><a href="http://localhost:1313/about/#sns:6083a88ee3411b0d17ce02d738f69d47"><i class="fa fa-plus-square"></i></a></li>
      <li><a href="" type="application/rss+xml" target="_blank"><i class="fa fa-rss"></i></a></li>
    </ul>
    
    </header>

		
		
		
		
		<ul class="topic-path">
		  <li><a href="http://localhost:1313/">home</a></li>
		  
		    
		      
		      <li><a href='http://localhost:1313/post'>post</a></li>
		      
		      
		  
		    
		      
		      <li><a href='http://localhost:1313/post/javascript'>javascript</a></li>
		      
		      
		  
		    
		      
		      <li><a href='http://localhost:1313/post/javascript/base_javascript_jquery'>base_javascript_jquery</a></li>
		      
		      
		  
		    
		      
		  
		</ul>



    <main id="main" role="main">
      <article>

        <header class="article-header">
          <h1 class="article-header__title">JavaScript / jQuery 自分の使い方</h1>
          <p class="article-header__category">category: <a href="http://localhost:1313/categories/%E3%82%AB%E3%83%86%E3%82%B4%E3%83%AA%E3%83%BCa">カテゴリーA</a></p>
          <ul class="article-header__tags"><li><a href="http://localhost:1313/tags/javascript">#JavaScript</a></li><li><a href="http://localhost:1313/tags/jquery">#jQuery</a></li></ul>
          <p class="article-header__date"><time datetime="2015-02-21T17:56:56&#43;09:00">Feb 21, 2015</time></p>
          <p class="article-header__lead">[Web制作勉強会@川西市](http://hokusetsu-webcreators.net/)用資料。JavaScript関連で自分はこんな風にしてるよ、ってのを書き出しました</p>
        </header>

<nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#jquery-基本:2763c954d56445700fdcab66b8eafc7c">jQuery 基本</a></li>
<li><a href="#modernizr:2763c954d56445700fdcab66b8eafc7c">modernizr</a>
<ul>
<li><a href="#例1-ブラウザに実装されている機能を判定しクラスを付加:2763c954d56445700fdcab66b8eafc7c">例1：ブラウザに実装されている機能を判定しクラスを付加</a></li>
<li><a href="#例2-javascript中で現在のブラウザが指定の機能を持つか判定して分岐処理:2763c954d56445700fdcab66b8eafc7c">例2：JavaScript中で現在のブラウザが指定の機能を持つか判定して分岐処理</a></li>
</ul></li>
<li><a href="#throttle-と-debounce:2763c954d56445700fdcab66b8eafc7c">throttle と debounce</a>
<ul>
<li><a href="#underscore-js-のメソッドを使用:2763c954d56445700fdcab66b8eafc7c">Underscore.js のメソッドを使用</a>
<ul>
<li><a href="#実装:2763c954d56445700fdcab66b8eafc7c">実装</a></li>
</ul></li>
<li><a href="#jquery-throttle-debounce-を使用:2763c954d56445700fdcab66b8eafc7c">jquery-throttle-debounce を使用</a>
<ul>
<li><a href="#実装-1:2763c954d56445700fdcab66b8eafc7c">実装</a></li>
</ul></li>
</ul></li>
<li><a href="#現在のページtopに戻る-ページ内スムーススクロール:2763c954d56445700fdcab66b8eafc7c">現在のページTopに戻る &amp; ページ内スムーススクロール</a></li>
<li><a href="#横に並んだブロック要素の高さを揃える:2763c954d56445700fdcab66b8eafc7c">横に並んだブロック要素の高さを揃える</a>
<ul>
<li><a href="#jquery-プラグイン:2763c954d56445700fdcab66b8eafc7c">jQuery プラグイン</a></li>
</ul></li>
<li><a href="#ポリフィル-polyfill-色々:2763c954d56445700fdcab66b8eafc7c">ポリフィル (polyfill) 色々</a></li>
<li><a href="#備考-画像遅延ロードの-lazy-load-は使わない:2763c954d56445700fdcab66b8eafc7c">備考：画像遅延ロードの Lazy Load は使わない</a>
<ul>
<li><a href="#サンプル-html中でのjavascriptファイル読込み:2763c954d56445700fdcab66b8eafc7c">サンプル：HTML中でのJavaScriptファイル読込み</a></li>
</ul></li>
</ul></li>
</ul>
</nav>

        <div class="article-body">


<h2 id="jquery-基本:2763c954d56445700fdcab66b8eafc7c">jQuery 基本</h2>

<ul>
<li>IE8以前を切り捨て軽量化した jQuery 2.x が出ているが、IE8はまだ切れないので現状1の最新版(1.11.x)を使用</li>
<li>次バージョン：<a href="http://www.publickey1.jp/blog/14/jquery_2xjquery_30jquery_1xjquery_compat_30jquery.html">「jQuery 2.x→jQuery 3.0」「jQuery 1.x→jQuery Compat 3.0」に - Publickey</a></li>
<li>キャッシュによる高速化が見込めるCDN(Google API or jQuery公式)のものを使用。読み込めない時のフォールバックを用意</li>
<li>jQuery本体の読み込みタグは静的サイトならbody閉じタグ直前に配置。WordPressはプラグインとの兼ね合いで冒頭に置いた方が無難か？</li>
<li>最新版の方が軽くて早いのでなるべく最新版を使いたい (でも古いバージョンのまま放置しているサイトもあるのが現状)</li>
<li>古いサイトのメンテで1.9以降切り捨てられたAPIが使われている場合は <a href="http://jquery.com/download/#jquery-migrate-plugin">jQuery Migrate プラグイン</a>を入れると良い</li>
<li>jQuery互換で早くて軽いという<a href="http://zeptojs.com/">Zepto</a>があるが、リスク(なんか不安、jQueryプラグインが動かない場合があるらしい)を避け使っていない。CSSフレームワークのFoundationやクックパッドスマホ版など実用例はある</li>
<li>jQueryプラグインは、plugins.js に統合することでHTMLをスッキリさせHTTPリクエストを減らせる。圧縮するとなお良い(plugins.min.js。gulpなどの自動化ツールを使う)</li>
<li>WordPressで最新版jQueryを読み込む場合。WordPressに元から組み込んであるものは外すこと</li>
</ul>

<pre><code>  wp_deregister_script( 'jquery' );
  wp_enqueue_script( 'jquery', '//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js', array(), '20130115', true );
</code></pre>

<h2 id="modernizr:2763c954d56445700fdcab66b8eafc7c">modernizr</h2>

<ul>
<li>ブラウザの機能サポート状況(HTML5、CSS3)を判定し分岐処理ができる</li>
<li>HTML5未対応ブラウザにHTML5タグを認識させる HTML5-Shiv を含む</li>
<li>リサイズ時にドキュメントの幅を取得する機能 (= window.matchMedia()) が付いてる</li>
<li>設置場所は headタグ内</li>
<li>本家サイトで機能を付け加えたりのカスタマイズができるが、メンテナンスを考えるとデフォルトのものを使うのが良いと思う</li>
<li>基本的な使い方：<a href="http://liginc.co.jp/web/js/other-js/128673">modernizr.js の機能と利用方法 - LIG</a></li>
<li>判定可能な機能(※ハイフン等書き方に注意)：<a href="http://modernizr.com/docs/#s2">Modernizr Documentation</a></li>
<li>これも読み込めない時のフォールバックを用意</li>
</ul>

<h3 id="例1-ブラウザに実装されている機能を判定しクラスを付加:2763c954d56445700fdcab66b8eafc7c">例1：ブラウザに実装されている機能を判定しクラスを付加</h3>

<p>modernizer適用前</p>

<p><code>&lt;html class=&quot;no-js&quot;&gt;</code></p>

<p>modernizer適用後。これでCSS等で分岐処理可能</p>

<pre><code>&lt;html class=&quot;js flexbox canvas canvastext webgl no-touch geolocation postmessage websqldatabase indexeddb hashchange history draganddrop websockets rgba hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations csscolumns cssgradients cssreflections csstransforms csstransforms3d csstransitions fontface generatedcontent video audio localstorage sessionstorage webworkers applicationcache svg inlinesvg smil svgclippaths&quot; 
</code></pre>

<h3 id="例2-javascript中で現在のブラウザが指定の機能を持つか判定して分岐処理:2763c954d56445700fdcab66b8eafc7c">例2：JavaScript中で現在のブラウザが指定の機能を持つか判定して分岐処理</h3>

<pre><code>if (Modernizr.geolocation) { //Geolocation API に対応しているかチェック
  //対応してる時の処理
}
else {  
  //対応してない時の処理
}
</code></pre>

<h2 id="throttle-と-debounce:2763c954d56445700fdcab66b8eafc7c">throttle と debounce</h2>

<p>ともに必要以上のイベント発生を抑えるのに使用。scrollやresize時のイベントによく使う。 throttleは、実行間隔をnミリ秒に抑える。例えば、scroll時のイベント発生を◎ミリ秒ごとに抑えるなど debounceは、nミリ秒、繰り返しの呼び出しをさせない(= 入力がストップしてnミリ秒経ったらイベント発生)。例えば、resize操作完了後◎ミリ秒たったらイベント発生させるなど。 Underscore.js の関数か、jquery.ba-throttle-debounce.min.js を使うとシンプルに書ける<br />
自分は便利なメソッドてんこ盛りのUnderscore.jsを標準で入れるようにしたので、Underscore.jsのものを使う</p>

<h3 id="underscore-js-のメソッドを使用:2763c954d56445700fdcab66b8eafc7c">Underscore.js のメソッドを使用</h3>

<p>underscore-min.js は 16KB</p>

<ul>
<li><a href="http://underscorejs.org/#throttle">Underscore.js</a></li>
<li><a href="http://d.hatena.ne.jp/ninoseki/20110414/1302786001">便利機能満載のライブラリUnderscore.js - にのせき日記</a></li>
</ul>

<p>構文</p>

<pre><code>_.throttle(function, 500);//引数：関数, ミリ秒
_.debounce(function, 500);
</code></pre>

<h4 id="実装:2763c954d56445700fdcab66b8eafc7c">実装</h4>

<p>適用前</p>

<pre><code>$(window).scroll(function(){
  //処理
}
</code></pre>

<p>適用後) 例：スクロールイベントで使用時</p>

<pre><code>$(window).scroll(_.throttle(function(){
  //処理
}, 500));
</code></pre>

<h3 id="jquery-throttle-debounce-を使用:2763c954d56445700fdcab66b8eafc7c">jquery-throttle-debounce を使用</h3>

<p>jquery.ba-throttle-debounce.min.js は731バイト</p>

<ul>
<li><p><a href="http://benalman.com/projects/jquery-throttle-debounce-plugin/">jQuery throttle / debounce</a></p>

<ul>
<li>処理回数を見るサンプル：<a href="http://benalman.com/code/projects/jquery-throttle-debounce/examples/throttle/">jQuery throttle / debounce » Examples » Throttle</a></li>
</ul></li>

<li><p>Pure JavaScript で実装するには：<a href="http://blog.tsumikiinc.com/article/20141125_javascript-event-throttle.html">JavaScriptでの多発するイベントの間引き処理 - つみきブログ</a></p></li>

<li><p><a href="http://underscorejs.org/">Underscore.js</a> (JavaScriptのユーティリティライブラリ) に同等メソッド throttle()/debounce() がある</p></li>
</ul>

<h4 id="実装-1:2763c954d56445700fdcab66b8eafc7c">実装</h4>

<p>適用前</p>

<pre><code>$(window).scroll(function(){
  //処理
}
</code></pre>

<p>適用後 (500ミリ秒ごに処理)</p>

<pre><code>$(window).scroll($.throttle(500, function() {
  //処理
}));
</code></pre>

<h2 id="現在のページtopに戻る-ページ内スムーススクロール:2763c954d56445700fdcab66b8eafc7c">現在のページTopに戻る &amp; ページ内スムーススクロール</h2>

<p><a href="https://gist.github.com/takunagai/457302aaa44421bbc958">ページ内スムーススクロール &amp; ページ上部へ戻るボタン（要jQuery）</a></p>

<p>上記のthrottleを使用</p>

<h2 id="横に並んだブロック要素の高さを揃える:2763c954d56445700fdcab66b8eafc7c">横に並んだブロック要素の高さを揃える</h2>

<p>自分は <a href="http://css-tricks.com/equal-height-blocks-in-rows/">Equal Height Blocks in Rows - CSS-Tricks</a> をウインドウリサイズ時にも対応するよう改良したPure JavaScriptのものを使用</p>

<h3 id="jquery-プラグイン:2763c954d56445700fdcab66b8eafc7c">jQuery プラグイン</h3>

<ul>
<li><a href="http://file.urin.take-uma.net/jquery.tile.js-Demo.html">jquery.tile.js</a></li>
<li><a href="http://blog.webcreativepark.net/2013/10/21-112000.html">jquery.heightLine.js</a> (to-R)、Equal Height</li>
</ul>

<h2 id="ポリフィル-polyfill-色々:2763c954d56445700fdcab66b8eafc7c">ポリフィル (polyfill) 色々</h2>

<p>古いブラウザにモダンブラウザのみで動く機能を追加させる ただし処理が重くなるので極力使用しないことが望ましい</p>

<ul>
<li>iscroll, iscroll-lite スマホで position: fixed</li>
<li>picturefill picture要素やimgのsrcset/sizes属性指定などを使えるように(Chrome, Opera以外)</li>
<li>PIE_IE9.js, PIE_IE678.js border-radius, box-shadow(insetは非対応), 複数の背景 ,border-image, 背景グラデーション ※IE9は後者2つのみ</li>
<li>rem.min.js IE8 以下でもフォント単位 rem が使えるように</li>
<li>respond.min.js IE8以下でレスポンシブ対応させる</li>
<li>selectivizr (IE8以下でCSS3セレクタ使用できるように)</li>
</ul>

<p>以下、IE8以下非対応なら不要</p>

<ul>
<li>minmax IE6以下でmin-width,max-width, min-height , max-heightを利用可能に。IE6切り捨てるなら不要</li>
<li>boxsizing.htc IE7以下でbox-sizingを使えるように</li>
<li>imgSizer (IE7以下で画像の荒れを防ぐ)</li>
<li>jquery.exfixed IE6で position:fixed</li>
</ul>

<h2 id="備考-画像遅延ロードの-lazy-load-は使わない:2763c954d56445700fdcab66b8eafc7c">備考：画像遅延ロードの Lazy Load は使わない</h2>

<ul>
<li>見えない位置の画像を非表示にしておき、見える位置までスクロールすると表示させる。アクセス時のリクエスト数、読込容量を減らすことができる</li>
<li>Lazy Load は画像が画像検索にインデックスされないので SEO的に不利と思い自分は不採用 (noscriptタグを使う方法は完全な解決策にならないらしいし、hijax links なる解決法もあるらしいが面倒なので却下)</li>
<li>同様のスクリプトに Unveil.js (Lazy Load をエフェクトなどを省き軽くしたもの)、showByScroll、Echo.js (これはPure JavaScript) 等色々</li>
<li><a href="http://web-tan.forum.impressrd.jp/e/2014/05/30/17567/page/1">グーグルのJavaScript理解はまだ発展途上。画像の遅延読み込みは注意 - Web担当者Forum</a></li>
<li><a href="https://www.idea-r.it/blog/110/en/lazy-loading-seo-problem">Lazy loading and the SEO problem, solved! - Idea R Blog</a></li>
</ul>

<h3 id="サンプル-html中でのjavascriptファイル読込み:2763c954d56445700fdcab66b8eafc7c">サンプル：HTML中でのJavaScriptファイル読込み</h3>

<pre><code>&lt;!-- * * * * * * * * * * head タグ内に設置 * * * * * * * * * * * * --&gt;

  &lt;script src=&quot;../js/vendor/modernizr-2.8.3.min.js&quot;&gt;&lt;/script&gt;



  &lt;!-- * * * * * * * * * * body閉じタグ直前に設置 * * * * * * * * * * * * --&gt;


  &lt;script src=&quot;//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js&quot;&gt;&lt;/script&gt;
  &lt;script&gt;window.jQuery || document.write('&lt;script src=&quot;../js/vendor/jquery-1.11.2.min.js&quot;&gt;&lt;\/script&gt;')&lt;/script&gt;
  &lt;script src=&quot;../js/plugins.minjs&quot;&gt;&lt;/script&gt;&lt;!-- jQueryプラグイン等を統合したもの --&gt;
  &lt;script src=&quot;../js/main.min.js&quot;&gt;&lt;/script&gt;&lt;!-- Google Analytics のトラッキングコードも入れること --&gt;


  &lt;!-- * * * Polyfils * * * --&gt;

  &lt;script&gt;
    //Androidの場合のみ iscroll-lite.js を読みこませる
    if(/Android/.test(navigator.userAgent)){
      $('script').attr('src','../bower_components/iscroll/build/iscroll-lite.js').appendTo('head');
      //alert('テスト：iscroll-lite.jsを読み込みました。');
    }
  &lt;/script&gt;


  &lt;!--[if IE 9]&gt;
  &lt;script src=&quot;../js/vendor/PIE_IE9.js&quot;&gt;&lt;/script&gt;
  &lt;script&gt;
    /**
     * サポート：border-image, 背景グラデーション
     */
    $(function() {
      if (window.PIE) {
        //$('.class_name').each(function() { PIE.attach(this); }); //★★適用させたい要素を指定
      }
    });
  &lt;/script&gt;
  &lt;![endif]--&gt;


  &lt;!--[if IE 8]&gt;
  &lt;script src=&quot;../js/vendor/selectivizr-min.js&quot;&gt;&lt;/script&gt;
  &lt;script src=&quot;../js/vendor/respond.min.js&quot;&gt;&lt;/script&gt;
  &lt;script src=&quot;../js/vendor/PIE_IE678.js&quot;&gt;&lt;/script&gt;
  &lt;script&gt;
    /**
     * サポート：border-image, 背景グラデーション, 複数の背景, border-radius, box-shadow(insetには非対応)
     */
    $(function() {
      if (window.PIE) {
        $('.button, .label, article h2, .pagetop a').each(function() { //★★適用させたい要素を指定
          PIE.attach(this);
        });
      }
    });
  &lt;/script&gt;
  &lt;![endif]--&gt;

&lt;/body&gt;
&lt;/html&gt;
</code></pre>

        </div>

        <footer class="article-footer">
          <div class="previous-next">
            前の記事：<a href="http://localhost:1313/about/"> このサイトについて</a><br>
            次の記事：<a href="http://localhost:1313/post/wordpress/css-styling_immediate-article-links/"> レスポンシブな前後の記事リンクのスタイリング</a>
          </div>
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'takunagaigithubio';
    var disqus_identifier = 'http:\/\/localhost:1313\/post\/javascript\/base_javascript_jquery\/';
    var disqus_title = 'JavaScript \/ jQuery 自分の使い方';
    var disqus_url = 'http:\/\/localhost:1313\/post\/javascript\/base_javascript_jquery\/';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        </footer>

      </article>
    </main>

    <p id="move-to-page-top"><a href="#top"><i class="fa fa-chevron-up"></i></a></p>

    <hr>

    <aside class="grid-block cells4 mobile-2col panel">
      <div class="cell">
        <h2>見出しです</h2>
        <p>ダミーです私は同年同時にこういう理解通りというはずの末についに生涯がなるだでし。</p>
      </div>
      <div class="cell">
        <h2>見出しです</h2>
        <p>ダミーです私は同年同時にこういう理解通りというはずの末についに生涯がなるだでし。</p>
      </div>
      <div class="cell">
        <h2>見出しです</h2>
        <p>ダミーです私は同年同時にこういう理解通りというはずの末についに生涯がなるだでし。</p>
      </div>
      <div class="cell">
        <h2>見出しです</h2>
        <p>ダミーです私は同年同時にこういう理解通りというはずの末についに生涯がなるだでし。</p>
      </div>
    </aside>

    <footer class="global-footer">

      

      <p class="global-footer__copyright">Copyright © 2015 taku_nagai All rights reserved.<br>
      Powered by <a href="https://gohugo.io" target="_blank">Hugo</a> 0.14</p>
    </footer>

    
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0-alpha1/jquery.min.js"></script>
    <script>window.jQuery || document.write('http:\/\/localhost:1313\/bower_components/jQuery/dist/jquery.min.js"><\/script>')</script>
    <script src="http://localhost:1313//js/plugins.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/lodash.js/3.5.0/lodash.min.js"></script>
    <script>window._ || document.write('http:\/\/localhost:1313\/bower_components/lodash/lodash.min.js"><\/script>')</script>
    <script src="http://localhost:1313/js/main.js"></script>
    

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-XXXXXXXX-X', 'auto');
      ga('send', 'pageview');
    </script>


<aside class="variables" style="border:1px dotted red;">
  <p>[Template Variables](http://gohugo.io/templates/variables/)</p>
  <h2>Variables</h2>
  <ol>
    <li>TITLE: JavaScript / jQuery 自分の使い方</li>
    <li>CONTENT: 記事のHTML</li>
    <li>SUMMARY: jQuery 基本 IE8以前を切り捨て軽量化した jQuery 2.x が出ているが、IE8はまだ切れないので現状1の最新版(1.11.x)を使用 次バージョン：「jQuery 2.x→jQuery 3.0」「jQuery 1.x→jQuery Compat 3.0」に - Publickey キャッシュによる高速化が見込めるCDN(Google API or jQuery公式)のものを使用。読み込めない時のフォールバックを用意 jQuery本体の読み込みタグは静的サイトならbody閉じタグ直前に配置。WordPressはプラグインとの兼ね合いで冒頭に置いた方が無難か？ 最新版の方が軽くて早いのでなるべく最新版を使いたい (でも古いバージョンのまま放置しているサイトもあるのが現状) 古いサイトのメンテで1.9以降切り捨てられたAPIが使われている場合は jQuery Migrate プラグインを入れると良い jQuery互換で早くて軽いというZeptoがあるが、リスク(なんか不安、jQueryプラグインが動かない場合があるらしい)を避け使っていない。CSSフレームワークのFoundationやクックパッドスマホ版など実用例はある jQueryプラグインは、plugins.js に統合することでHTMLをスッキリさせHTTPリクエストを減らせる。圧縮するとなお良い(plugins.min.js。gulpなどの自動化ツールを使う) WordPressで最新版jQueryを読み込む場合。WordPressに元から組み込んであるものは外すこと wp_deregister_script( 'jquery' ); wp_enqueue_script( 'jquery', '//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js', array(), '20130115', true ); modernizr ブラウザの機能サポート状況(HTML5、CSS3)を判定し分岐処理ができる HTML5未対応ブラウザにHTML5タグを認識させる HTML5-Shiv を含む リサイズ時にドキュメントの幅を取得する機能 (= window.matchMedia()) が付いてる 設置場所は headタグ内 本家サイトで機能を付け加えたりのカスタマイズができるが、メンテナンスを考えるとデフォルトのものを使うのが良いと思う 基本的な使い方：modernizr.js の機能と利用方法 - LIG 判定可能な機能(※ハイフン等書き方に注意)：Modernizr Documentation これも読み込めない時のフォールバックを用意 例1：ブラウザに実装されている機能を判定しクラスを付加 modernizer適用前 &lt;html class=&quot;no-js&quot;&gt; modernizer適用後。これでCSS等で分岐処理可能 &lt;html class=&quot;js flexbox canvas canvastext webgl no-touch geolocation postmessage websqldatabase indexeddb hashchange history draganddrop websockets rgba hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations csscolumns cssgradients cssreflections csstransforms csstransforms3d csstransitions fontface generatedcontent video audio localstorage sessionstorage webworkers applicationcache svg inlinesvg smil svgclippaths&quot; 例2：JavaScript中で現在のブラウザが指定の機能を持つか判定して分岐処理 if (Modernizr.geolocation) { //Geolocation API に対応しているかチェック //対応してる時の処理 } else { //対応してない時の処理 } throttle と debounce ともに必要以上のイベント発生を抑えるのに使用。scrollやresize時のイベントによく使う。 throttleは、実行間隔をnミリ秒に抑える。例えば、scroll時のイベント発生を◎ミリ秒ごとに抑えるなど debounceは、nミリ秒、繰り返しの呼び出しをさせない(= 入力がストップしてnミリ秒経ったらイベント発生)。例えば、resize操作完了後◎ミリ秒たったらイベント発生させるなど。 Underscore.js の関数か、jquery.ba-throttle-debounce.min.js を使うとシンプルに書ける 自分は便利なメソッドてんこ盛りのUnderscore.jsを標準で入れるようにしたので、Underscore.jsのものを使う Underscore.js のメソッドを使用 underscore-min.js は 16KB Underscore.js 便利機能満載のライブラリUnderscore.js - にのせき日記 構文 _.throttle(function, 500);//引数：関数, ミリ秒 _.debounce(function, 500); 実装 適用前 $(window).scroll(function(){ //処理 } 適用後) 例：スクロールイベントで使用時 $(window).scroll(_.throttle(function(){ //処理 }, 500)); jquery-throttle-debounce を使用 jquery.ba-throttle-debounce.min.js は731バイト jQuery throttle / debounce 処理回数を見るサンプル：jQuery throttle / debounce » Examples » Throttle Pure JavaScript で実装するには：JavaScriptでの多発するイベントの間引き処理 - つみきブログ Underscore.js (JavaScriptのユーティリティライブラリ) に同等メソッド throttle()/debounce() がある 実装 適用前 $(window).scroll(function(){ //処理 } 適用後 (500ミリ秒ごに処理) $(window).scroll($.throttle(500, function() { //処理 })); 現在のページTopに戻る &amp; ページ内スムーススクロール ページ内スムーススクロール &amp; ページ上部へ戻るボタン（要jQuery） 上記のthrottleを使用 横に並んだブロック要素の高さを揃える 自分は Equal Height Blocks in Rows - CSS-Tricks をウインドウリサイズ時にも対応するよう改良したPure JavaScriptのものを使用 jQuery プラグイン jquery.tile.js jquery.heightLine.js (to-R)、Equal Height ポリフィル (polyfill) 色々 古いブラウザにモダンブラウザのみで動く機能を追加させる ただし処理が重くなるので極力使用しないことが望ましい iscroll, iscroll-lite スマホで position: fixed picturefill picture要素やimgのsrcset/sizes属性指定などを使えるように(Chrome, Opera以外) PIE_IE9.js, PIE_IE678.js border-radius, box-shadow(insetは非対応), 複数の背景 ,border-image, 背景グラデーション ※IE9は後者2つのみ rem.min.js IE8 以下でもフォント単位 rem が使えるように respond.min.js IE8以下でレスポンシブ対応させる selectivizr (IE8以下でCSS3セレクタ使用できるように) 以下、IE8以下非対応なら不要 minmax IE6以下でmin-width,max-width, min-height , max-heightを利用可能に。IE6切り捨てるなら不要 boxsizing.htc IE7以下でbox-sizingを使えるように imgSizer (IE7以下で画像の荒れを防ぐ) jquery.exfixed IE6で position:fixed 備考：画像遅延ロードの Lazy Load は使わない 見えない位置の画像を非表示にしておき、見える位置までスクロールすると表示させる。アクセス時のリクエスト数、読込容量を減らすことができる Lazy Load は画像が画像検索にインデックスされないので SEO的に不利と思い自分は不採用 (noscriptタグを使う方法は完全な解決策にならないらしいし、hijax links なる解決法もあるらしいが面倒なので却下) 同様のスクリプトに Unveil.js (Lazy Load をエフェクトなどを省き軽くしたもの)、showByScroll、Echo.js (これはPure JavaScript) 等色々 グーグルのJavaScript理解はまだ発展途上。画像の遅延読み込みは注意 - Web担当者Forum Lazy loading and the SEO problem, solved!</li>
    <li>TRUNCATED: true</li>
    <li>DESCRIPTION: [Web制作勉強会@川西市](http://hokusetsu-webcreators.net/)用資料。JavaScript関連で自分はこんな風にしてるよ、ってのを書き出しました</li>
    <li>KEYWORDS: []</li>
    <li>DATE: 2015-02-21 17:56:56 &#43;0900 JST</li>
    <li>PUBLISHDATE: 0001-01-01 00:00:00 &#43;0000 UTC</li>
    <li>TYPE: post</li>
    <li>SECTION: post</li>
    <li>PERMALINK: http://localhost:1313/post/javascript/base_javascript_jquery/</li>
    <li>RELPERMALINK: /post/javascript/base_javascript_jquery</li>
    <li>LINKTITLE: JavaScript / jQuery 自分の使い方</li>
    <li>RSSLINK: </li>
    <li>TABLEOFCONTENTS: <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#jquery-基本:2763c954d56445700fdcab66b8eafc7c">jQuery 基本</a></li>
<li><a href="#modernizr:2763c954d56445700fdcab66b8eafc7c">modernizr</a>
<ul>
<li><a href="#例1-ブラウザに実装されている機能を判定しクラスを付加:2763c954d56445700fdcab66b8eafc7c">例1：ブラウザに実装されている機能を判定しクラスを付加</a></li>
<li><a href="#例2-javascript中で現在のブラウザが指定の機能を持つか判定して分岐処理:2763c954d56445700fdcab66b8eafc7c">例2：JavaScript中で現在のブラウザが指定の機能を持つか判定して分岐処理</a></li>
</ul></li>
<li><a href="#throttle-と-debounce:2763c954d56445700fdcab66b8eafc7c">throttle と debounce</a>
<ul>
<li><a href="#underscore-js-のメソッドを使用:2763c954d56445700fdcab66b8eafc7c">Underscore.js のメソッドを使用</a>
<ul>
<li><a href="#実装:2763c954d56445700fdcab66b8eafc7c">実装</a></li>
</ul></li>
<li><a href="#jquery-throttle-debounce-を使用:2763c954d56445700fdcab66b8eafc7c">jquery-throttle-debounce を使用</a>
<ul>
<li><a href="#実装-1:2763c954d56445700fdcab66b8eafc7c">実装</a></li>
</ul></li>
</ul></li>
<li><a href="#現在のページtopに戻る-ページ内スムーススクロール:2763c954d56445700fdcab66b8eafc7c">現在のページTopに戻る &amp; ページ内スムーススクロール</a></li>
<li><a href="#横に並んだブロック要素の高さを揃える:2763c954d56445700fdcab66b8eafc7c">横に並んだブロック要素の高さを揃える</a>
<ul>
<li><a href="#jquery-プラグイン:2763c954d56445700fdcab66b8eafc7c">jQuery プラグイン</a></li>
</ul></li>
<li><a href="#ポリフィル-polyfill-色々:2763c954d56445700fdcab66b8eafc7c">ポリフィル (polyfill) 色々</a></li>
<li><a href="#備考-画像遅延ロードの-lazy-load-は使わない:2763c954d56445700fdcab66b8eafc7c">備考：画像遅延ロードの Lazy Load は使わない</a>
<ul>
<li><a href="#サンプル-html中でのjavascriptファイル読込み:2763c954d56445700fdcab66b8eafc7c">サンプル：HTML中でのJavaScriptファイル読込み</a></li>
</ul></li>
</ul></li>
</ul>
</nav></li>
    <li>PREV: </li>
    <li>NEXT: </li>
    <li>PREVINSECTION: </li>
    <li>NEXTINSECTION: </li>
    <li>FUZZYWORDCOUNT: 500</li>
    <li>WORDCOUNT: 447</li>
    <li>READINGTIME: 3</li>
    <li>WEIGHT: 0</li>
    <li>ISNODE: false</li>
    <li>ISPAGE: true</li>
    <li>TAXONOMIES: .Taxonomies に不具合あるので無効化した</li>
  </ol>

  <h3>Page Params</h3>
  <ol>
    <li>.Params.tags: [JavaScript jQuery]</li>
    <li>.Params.categories: [カテゴリーA]</li>
  </ol>

  <h3>Taxonomy Term Variables</h3>
  <ol>
    <li>.Data.Singular: </li>
    <li>.Data.Plural: </li>
    <li>.Data.Terms: </li>
    <li>.Data.Terms.Alphabetical </li>
    <li>.Data.Terms.ByCount </li>
  </ol>

  <h3>Site Variables (config.toml)</h3>
  <ol>
    <li>.Site.BaseURL: http://localhost:1313/</li>
    <li>.Site.Taxonomies: map[tags:map[css:[{0 }] wordpress:[{0 }] vagrant:[{0 }] hugo:[{0 } {0 }] mamp:[{0 }] html:[{0 }] javascript:[{0 }] jquery:[{0 }] レスポンシブ:[{0 }] まとめ:[{0 }] markdown:[{0 }] web制作:[{0 } {0 } {0 }] サーバー:[{0 }] gulp:[{0 }] 開発環境:[{0 } {0 } {0 }]] categories:map[カテゴリーb:[{0 }] カテゴリーa:[{0 }] wordpress:[{0 }] 開発環境:[{0 } {0 } {0 } {0 }]]]</li>
    <li>.Site.LastChange: 2015-07-24 09:01:00 &#43;0900 JST</li>
    <li>.Site.Pages: [        ]</li>
    <li>.Site.Params: map[contact:map[form:map[phone:map[text:Phone Number error:Please enter your phone number.] message:map[error:Please enter a message. text:Message] button:map[text:Send] name:map[text:Name error:Please enter your name.] email:map[text:Email Adress error:Please enter your email address.]] title:Contact] tagline:Web系技術ブログ copyright:Copyright © 2015 taku_nagai All rights reserved. analytics:UA-XXXXXXXX-X] 設定ファイルに記述した[params]下</li>
    <li>.Site.Sections: map[post:[{0 } {0 } {0 } {0 } {0 } {0 } {0 }] :[{0 } {0 }]]</li>
    <li>.Site.Pages: [        ]</li>
    <li>.Site.Files: []</li>
    <li>.Site.Menus: map[main:0xc20822dc80]</li>
    <li>.Site.Title: My Blog</li>
    <li>.Site.Author: map[twitter:https://twitter.com/taku_nagai github:https://github.com/takunagai tumblr:http://takunagai.github.io.tumblr.com instagram:https://instagram.com/taku_n_/ avatar:/img/avatar.png name:Taku Nagai email:taky1973@gmail.com facebook:https://www.facebook.com/takuya.nagai.12]</li>
    <li>.Site.LanguageCode: ja</li>
    <li>.Site.DisqusShortname: takunagaigithubio</li>
    <li>.Site.Copyright: This work is licensed under a Creative Commons Attribution-ShareAlike 4.0 International License.</li>
    <li>.Site.LastChange: 2015-07-24 09:01:00 &#43;0900 JST</li>
    <li>.Site.Permalinks: map[]</li>
    <li>.Site.BuildDrafts: false</li>
    <li>.Site.Data.パス: map[discography:[1974 – Modern American Music … Period! The Criteria Sessions 1974 – Jaco 1976 - Jaco Pastorius 1981 - Word of Mouth 1981 - The Birthday Concert (released in 1995) 1982 - Twins I &amp; II (released in 1999) 1983 - Invitation 1986 - Broadway Blues (released in 1998) 1986 - Honestly Solo Live (released in 1990) 1986 - Live In Italy (released in 1991) 1986 - Heavy&#39;n Jazz (released in 1992) 1991 - Live In New York City, Volumes 1-7. 1999 - Rare Collection (compilation) 2003 - Punk Jazz: The Jaco Pastorius Anthology (compilation) 2007 - The Essential Jaco Pastorius (compilation)]] カスタムデータ。以下ループ出力</li>
  </ol>

  <h3>Data</h3>
  
  <ul>
  
    <li>1974 – Modern American Music … Period! The Criteria Sessions</li>
  
    <li>1974 – Jaco</li>
  
    <li>1976 - Jaco Pastorius</li>
  
    <li>1981 - Word of Mouth</li>
  
    <li>1981 - The Birthday Concert (released in 1995)</li>
  
    <li>1982 - Twins I &amp; II (released in 1999)</li>
  
    <li>1983 - Invitation</li>
  
    <li>1986 - Broadway Blues (released in 1998)</li>
  
    <li>1986 - Honestly Solo Live (released in 1990)</li>
  
    <li>1986 - Live In Italy (released in 1991)</li>
  
    <li>1986 - Heavy&#39;n Jazz (released in 1992)</li>
  
    <li>1991 - Live In New York City, Volumes 1-7.</li>
  
    <li>1999 - Rare Collection (compilation)</li>
  
    <li>2003 - Punk Jazz: The Jaco Pastorius Anthology (compilation)</li>
  
    <li>2007 - The Essential Jaco Pastorius (compilation)</li>
  
  </ul>
  

  <ol>
    <li>.Hugo.Generator: <meta name="generator" content="Hugo 0.14" /> ←metaタグ &lt;meta name="generator" content="Hugo 0.13" &gt;></li>
    <li>.Hugo.Version: 0.14</li>
    <li>.Hugo.CommitHash:  git commit hash</li>
    <li>.Hugo.BuildDate: </li>
  </ol>
</aside>



  <script data-no-instant>document.write('<script src="http://'
        + (location.host || 'localhost').split(':')[0]
		+ ':1313/livereload.js?mindelay=10"></'
        + 'script>')</script></body>
</html>
